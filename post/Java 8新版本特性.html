
<!DOCTYPE html>
<html lang="en ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexo || Java 8 特性及实战</title>
    <meta name="author" content="John Doe">
    <meta name="description" content=" ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/avatar.png">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/maiden-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 5.4.2"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Hexo</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>about</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/like/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/like/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
        <a target="_blank" rel="noopener" href="https://en.korilin.com">
            <span>
                <a-icon type="compass" theme="filled" />
            </span>
            <span>英文博客</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Hexo</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/like/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/like/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
            <a target="_blank" rel="noopener" href="https://en.korilin.com">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="compass" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">英文博客</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>Java 8 特性及实战 </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/5/15
        </span>

        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/Java" style=color:#00bcd4>
                    Java
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <h1 id="一、JDK-8"><a href="#一、JDK-8" class="headerlink" title="一、JDK 8"></a>一、JDK 8</h1><ul>
<li>Lambda表达式</li>
<li>强大的Stream API</li>
<li>便于并行</li>
<li>最大化减少空指针异常：Optional</li>
<li>Nashorn引擎，允许在JVM上运行JS应用</li>
</ul>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116184712768.png" alt="image-20220116184712768"></p>
<h2 id="1-1-Lambda表达式"><a href="#1-1-Lambda表达式" class="headerlink" title="1.1 Lambda表达式"></a>1.1 Lambda表达式</h2><blockquote>
<p>例子</p>
</blockquote>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//标准写法</span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> cmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> o1<span class="token punctuation">,</span> <span class="token class-name">Integer</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// Lambda表达式 </span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> cmp1 <span class="token operator">=</span> <span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更简洁的Lambda表达式 </span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> cmp2 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">compare</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>本质</p>
</blockquote>
<p>作为函数式接口的实例 (接口实现类对象)</p>
<p><strong>函数式接口：</strong>一个接口中，只声明了一个抽象方法</p>
<blockquote>
<p>格式</p>
</blockquote>
<p><code>-&gt;</code> Lambda操作符，或箭头操作符，左边是形参列表(其实就是接口中的抽象方法中的形参列表)；右边是Lmbda体，其实就是重写的抽象方法的方法体。</p>
<ul>
<li><p>语法格式一：无参，无返回值</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Runnable</span> r <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"无参，无返回值"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>语法格式二：一个参数，没有返回值</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> con <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>语法格式三：数据类型可以省略，因为可由编译器推断出，成为类型推断</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> con <span class="token operator">=</span>  <span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>语法格式四：Lambda若只有一个参数，小括号可以省略</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> con <span class="token operator">=</span>  s <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>语法格式五：需要两个或以上参数，多条执行语句，并且有返回值</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> comparator <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"实现函数式接口方法"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>语法格式六：当Lambda体只有一条语句时，return和大括号可以省略</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> comparator <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">-></span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<blockquote>
<p>类型推断</p>
</blockquote>
<p>上述 Lambda 表达式中的参数类型都是由编译器推断得出的。Lambda 表达式中无需指定类型，程序依然可以编译，这是因为 javac 根据程序的上下文，在后台推断出了参数的类型。Lambda 表达式的类型依赖于上下文环境，是由编译器推断出来的。</p>
<h2 id="1-2-函数式接口"><a href="#1-2-函数式接口" class="headerlink" title="1.2 函数式接口"></a>1.2 函数式接口</h2><ul>
<li>只含有一个抽象方法的接口</li>
<li>可以通过Lambda表达式创建该接口的对象。若Lambda表达式抛出一个受检异常(即非运行时异常)，那么该异常需要在目标接口的抽象方法上进行声明</li>
<li>可以在一个接口上使用<code>@FunctionalInterface</code>注解，检查他是否是一个函数式接口。同时Javadoc种也会包含一条声明，说明这个接口是一个函数式接口</li>
<li>使得Java不但可以支持OOP还可以支持OOF（面向函数编程）</li>
<li>以前用匿名实现类表示的现在都可以用Lambda表达式来写</li>
</ul>
<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172038366.png" alt="image-20220116172038366" style="zoom:50%;" />

<blockquote>
<p>Java内置的四大核心函数式接口</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172129740.png" alt="image-20220116172129740"></p>
<blockquote>
<p>其他接口</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172149051.png" alt="image-20220116172149051"></p>
<h2 id="1-3-方法引用和构造器引用"><a href="#1-3-方法引用和构造器引用" class="headerlink" title="1.3 方法引用和构造器引用"></a>1.3 方法引用和构造器引用</h2><ul>
<li>当要传递给Lambda体的操作，已经有实现的方法了，就可以使用方法引用</li>
<li>可以看做是Lambda表达式深层次的表达。换句话说，方法引用就是Lambda表达式，也就是函数式接口的一个实例，通过方法的名字来指向一个方法。</li>
<li><strong>实现接口的抽象方法的参数列表和返回值类型，必须与方法引用的方法的参数列表和返回值类型保持一致</strong></li>
<li>主要有如下三种使用情况<ul>
<li><code>对象::实例方法名</code></li>
<li><code>类::静态方法名</code></li>
<li><code>类::实例方法名</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>方法引用</p>
</blockquote>
<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172428660.png" alt="image-20220116172428660" style="zoom:67%;" />



<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172442537.png" alt="image-20220116172442537" style="zoom:67%;" />



<p>==注意：当函数式接口方法的第一个参数是需要引用方法的调用者，并且第二个参数是需要引用方法的参数(或无参数)时：ClassName::methodName==</p>
<blockquote>
<p>构造器引用</p>
</blockquote>
<p><strong>要求构造器参数列表要与接口中抽象方法的参数列表一致！且方法的返回值即为构造器对应类的对象。</strong></p>
<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172637759.png" alt="image-20220116172637759" style="zoom:80%;" />

<p>以此还有数组引用</p>
<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116172718933.png" alt="image-20220116172718933" style="zoom:80%;" />

<h2 id="1-4-Stream-API"><a href="#1-4-Stream-API" class="headerlink" title="1.4 Stream API"></a>1.4 Stream API</h2><h3 id="1-4-1-概述"><a href="#1-4-1-概述" class="headerlink" title="1.4.1 概述"></a>1.4.1 概述</h3><ul>
<li>Stream API ( java.util.stream) 把真正的函数式编程风格引入到Java中。这是目前为止对Java类库最好的补充，因为Stream API可以极大提供Java程序员的生产力，让程序员写出高效率、干净、简洁的代码。</li>
<li>Stream 是 Java8 中处理集合的关键抽象概念，它可以指定你希望对集合进行的操作，可以执行非常复杂的查找、过滤和映射数据等操作。 <strong>使用Stream API 对集合数据进行操作，就类似于使用 SQL 执行的数据库查询。</strong>也可以使用 Stream API 来并行执行操作。简言之，Stream API 提供了一种高效且易于使用的处理数据的方式</li>
<li>实际开发中，项目中多数数据源都来自于Mysql，Oracle等。但现在数据源可以更多了，有MongDB，Radis等，而这些NoSQL的数据就需要Java层面去处理。因此需要StreamAPI</li>
</ul>
<blockquote>
<p>Stream和Collection集合的区别</p>
</blockquote>
<ul>
<li>Collection是一种静态的内存数据结构，而Stream是有关计算的。</li>
<li>Collection面向内存，存储在内存中。Stream面向CPU，通过CPU实现计算</li>
</ul>
<blockquote>
<p>是什么</p>
</blockquote>
<p>是数据渠道，用于操作数据源（集合、数组等）所生成的元素序列。<strong>集合讲的是数据，</strong>Stream讲的是计算！</p>
<p>注意：</p>
<ol>
<li>Stream自己本身不会存储元素</li>
<li>Stream不会改变源对象。他们会返回一个持有结果的新Stream</li>
<li>Stream操作是延迟执行的。这意味着他们会等到需要结果的时候才执行</li>
</ol>
<blockquote>
<p>使用步骤</p>
</blockquote>
<ol>
<li><p>创建Stream</p>
<p>一个数据源(如：集合、数组)，获取一个流</p>
</li>
<li><p>中间操作</p>
<p>一个中间操作链，对数据源的数据进行处理</p>
</li>
<li><p>终止操作(终端操作)</p>
<p>一旦执行终止操作，就执行中间操作链，并产生结果。之后不会再被使用</p>
</li>
</ol>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116173310477.png" alt="image-20220116173310477"></p>
<h3 id="1-4-2-创建Stream"><a href="#1-4-2-创建Stream" class="headerlink" title="1.4.2 创建Stream"></a>1.4.2 创建Stream</h3><blockquote>
<p>方式一：通过集合</p>
</blockquote>
<ul>
<li><code>default Stream&lt;E&gt; stream()</code>：返回一个顺序流</li>
<li><code>default Stream&lt;E&gt; parallelStream()</code>：返回一个并行流</li>
</ul>
<blockquote>
<p>方式二：通过数组</p>
</blockquote>
<ul>
<li><code>static&lt;T&gt; Stream&lt;T&gt; stream(T[] array)</code>：返回一个流</li>
</ul>
<blockquote>
<p>方式三：通过Stream的API</p>
</blockquote>
<ul>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; of(T... values)</code>：返回一个流</li>
</ul>
<blockquote>
<p>方式四：创建无限流</p>
</blockquote>
<ul>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</code>：迭代</li>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</code>：生成</li>
</ul>
<p><strong>并行流</strong>就是把一个内容分成多个数据块，并用不同的线程分别处理每个数据块的流。相比较串行的流，并行的流可以很大程度上提高程序的执行效率</p>
<p>Java 8 中将并行进行了优化，我们可以很容易的对数据进行并行操作。Stream API 可以声明性地通过 parallel() 与 sequential() 在并行流与顺序流之间进行切换.</p>
<h3 id="1-4-3-中间操作"><a href="#1-4-3-中间操作" class="headerlink" title="1.4.3 中间操作"></a>1.4.3 中间操作</h3><blockquote>
<p>筛选与切片</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183719575.png" alt="image-20220116183719575"></p>
<blockquote>
<p>映射</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183735308.png" alt="image-20220116183735308"></p>
<blockquote>
<p>排序</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183748626.png" alt="image-20220116183748626"></p>
<h3 id="1-4-4-终止操作"><a href="#1-4-4-终止操作" class="headerlink" title="1.4.4 终止操作"></a>1.4.4 终止操作</h3><blockquote>
<p>匹配与查找</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183814043.png" alt="image-20220116183814043"></p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183830696.png" alt="image-20220116183830696"></p>
<blockquote>
<p>规约</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183851771.png" alt="image-20220116183851771"></p>
<p><em>map和reduce的连接通常称为map-reduce模式,因Google用它来进行网络搜索而出名</em></p>
<blockquote>
<p>收集</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116183939273.png" alt="image-20220116183939273"></p>
<p>Collector 接口中方法的实现决定了如何对流执行收集的操作(如收集到 List、Set、Map)。</p>
<p>Collectors 实用类提供了很多静态方法，可以方便地创建常见收集器实例</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116184024292.png" alt="image-20220116184024292"></p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220116184035965.png" alt="image-20220116184035965"></p>
<h2 id="1-5-Optional-类"><a href="#1-5-Optional-类" class="headerlink" title="1.5 Optional 类"></a>1.5 Optional 类</h2><p>Optional<T> 类(java.util.Optional) 是一个容器类，它可以保存类型T的值，代表这个值存在。或者仅仅保存null，表示这个值不存在。原来用 null 表示一个值不存在，现在 Optional 可以更好的表达这个概念。并且可以避免空指针异常。</p>
<p>==Optional类的Javadoc描述如下：这是一个可以为null的容器对象。如果值存在则isPresent()方法会返回true，调用get()方法会返回该对象。==</p>
<p>Optional提供很多有用的方法，这样我们就不用显式进行空值检测。</p>
<blockquote>
<p>创建Optional类对象</p>
</blockquote>
<ul>
<li><code>Optional.of(T t)</code>：创建一个Optional实例，t必须非空</li>
<li><code>Optional.empty()</code>：创建一个空的Optional实例</li>
<li><code>Optional.ofNullable(T t)</code>：t可以为null</li>
</ul>
<blockquote>
<p>判断Optional容器种是否包含对象</p>
</blockquote>
<ul>
<li><code>boolean isPresent()</code>：判断是否包含对象</li>
<li><code>void ifPresent(Consumer&lt;? super T&gt; consumer)</code>：如果有值，就执行Consumer接口的实现代码，并且该值会作为参数传给它</li>
</ul>
<blockquote>
<p>获取Optional容器的对象</p>
</blockquote>
<ul>
<li><code>T get()</code>：如果调用对象包含值，返回该值，否则抛异常</li>
<li><code>T orElse(T other)</code>：如果有值则将其返回，否则返回指定的other对象</li>
<li><code>T orElseGet(Supplier&lt;? extends T&gt; other)</code>：如果有值则直接返回，否则返回由Supplier接口实现提供的对象</li>
<li><code>T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code>：如果有值则将其返回，否则抛出由Supplier接口实现提供的异常</li>
</ul>
<h2 id="1-6-Collector-lt-T-A-R-gt"><a href="#1-6-Collector-lt-T-A-R-gt" class="headerlink" title="1.6 Collector&lt;T, A, R&gt;"></a>1.6 Collector&lt;T, A, R&gt;</h2> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 用于还原操作的输入元素的类型</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> the type of input elements <span class="token keyword">to</span> <span class="token namespace">the</span> reduction operation
<span class="token comment">// 中间存放数据的容器</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">A</span><span class="token punctuation">></span></span> the mutable accumulation type of the reduction operation <span class="token punctuation">(</span>often hidden as an implementation detail<span class="token punctuation">)</span>
<span class="token comment">// 还原操作的结果类型（输出）</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">></span></span> the result type of the reduction operation<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Collector通过下面四个方法协同工作以完成汇聚操作：</p>
<ul>
<li>supplier： 创建新的结果容器</li>
<li>accumulator：将输入元素合并到结果容器中</li>
<li>combiner：合并两个结果容器(非必然运行 可能在并行流且Collector不具备CONCURRENT  时执行的 ) </li>
<li>finisher：将结果容器转换成最终的表示 (非必然运行 中间结果与最终结果类型是否一致决定是否运行，IDENTITY_FINISH用来标志 ) </li>
</ul>
<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220224163339308.png" alt="image-20220224163339308" style="zoom:67%;" />

<p><strong>Collector 就是归约运算操作的一种抽象</strong> </p>
<blockquote>
<p>理解归约reduce的含义 </p>
<p>(也就是归纳转换成另外一种形式)</p>
</blockquote>
<p>想要进行归约运算,你先给出一个初始容器,作为中间结果容器                         </p>
<p>然后再给出迭代运算逻辑 也就是要如何归约 归约的逻辑 就是在这里 结果计算到中间结果容器中                         </p>
<p>针对于并行计算还需要一个合并的方式 </p>
<blockquote>
<p>常用收集器 </p>
</blockquote>
<ul>
<li><strong>toList()</strong> ：将元素收集到一个 <strong>List</strong> 中</li>
<li>toSet() ：将元素收集到一个 <strong>Set</strong> 中。             </li>
<li>toCollection() ：将元素收集到一个<strong>Collection</strong>中</li>
<li>toMap() ：将元素收集到一个<strong>Map</strong>中，依据提供的映射函数将元素转换为键值</li>
<li><strong>summingInt(ToIntFunction&lt;? super T&gt;)</strong> ：给定值序列求和(还有<code>long</code>和<code>double</code>版本)</li>
<li>reducing(…)：用于归约计算(通常用作下游收集器，比如用于groupingBy 或者 partitioningBy下游)</li>
<li>partitioningBy(…) ：按照predicate分为两组</li>
<li>groupingBy(…)：将元素分组</li>
<li>maxBy(Comparator&lt;? super T&gt; comparator)：最大值</li>
<li>minBy(Comparator&lt;? super T&gt; comparator)：最小值</li>
<li>**mapping(Function&lt;T,U&gt; , Collector)**：将提供的映射函数应用于每个元素，并使用指定的下游收集器(通常用作下游收集器本身，比如用于groupingBy)进行处理</li>
<li>joining()：假设元素为String类型，将这些元素联结到一个字符串中(或许使用分隔符、前缀和后缀)</li>
<li>counting() ：计算元素数量(通常用作下游收集器)</li>
<li>averagingInt(ToIntFunction&lt;? super T&gt;) ：平均数(还有<code>long</code>和<code>double</code>版本)</li>
</ul>
<h2 id="1-7-Function-lt-T-R-gt"><a href="#1-7-Function-lt-T-R-gt" class="headerlink" title="1.7 Function&lt;T, R&gt;"></a>1.7 Function&lt;T, R&gt;</h2><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220224171449056.png" alt="image-20220224171449056" style="zoom: 67%;" />

<p>“接收一个参数，返回一个值”</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
    * 将此函数应用于给定参数，真正执行函数接口的方法
    */</span>
    <span class="token class-name">R</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">/**
    * 函数链，before执行的结果做根函数为参数
    */</span>
    <span class="token keyword">default</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> before<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>before<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">V</span> v<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">apply</span><span class="token punctuation">(</span>before<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token comment">/**
    * 函数链，根函数执行结果作为after的参数
    */</span>
    <span class="token keyword">default</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">></span></span> after<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>after<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">V</span> v<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token function">apply</span><span class="token punctuation">(</span>after<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token comment">/**
    * 返回一个参数作为返回值的函数
    */</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">identity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> t <span class="token operator">-></span> t<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<ul>
<li>BiFunction&lt;T,U,R&gt;：代表了一个接受两个输入参数的方法，并且返回一个结果</li>
<li>DoubleFunction&lt; R&gt;：代表接受一个double值参数的方法，并且返回结果</li>
<li>DoubleToIntFunction：接受一个double类型输入，返回一个int类型结果。</li>
<li>DoubleToLongFunction：接受一个double类型输入，返回一个long类型结果</li>
<li>IntFunction&lt; R&gt;:接受一个int类型输入参数，返回一个结果 。</li>
<li>IntToDoubleFunction：接受一个int类型输入，返回一个double类型结果 。</li>
<li>IntToLongFunction：接受一个int类型输入，返回一个long类型结果。</li>
<li>LongFunction&lt; R&gt;： 接受一个long类型输入参数，返回一个结果。</li>
<li>LongToDoubleFunction： 接受一个long类型输入，返回一个double类型结果。</li>
<li>LongToIntFunction：接受一个long类型输入，返回一个int类型结果。</li>
<li>ToDoubleBiFunction&lt;T,U&gt;：接受两个输入参数，返回一个double类型结果</li>
<li>ToDoubleFunction&lt; T&gt;：接受一个输入参数，返回一个double类型结果</li>
<li>ToIntBiFunction&lt;T,U&gt;：接受两个输入参数，返回一个int类型结果。</li>
<li>ToIntFunction&lt; T&gt;：接受一个输入参数，返回一个int类型结果。</li>
<li>ToLongBiFunction&lt;T,U&gt;：接受两个输入参数，返回一个long类型结果。</li>
<li>ToLongFunction&lt; T&gt;：接受一个输入参数，返回一个long类型结果。</li>
</ul>
<h1 id="二、实战应用"><a href="#二、实战应用" class="headerlink" title="二、实战应用"></a>二、实战应用</h1><h2 id="2-1-收集器-Collectors"><a href="#2-1-收集器-Collectors" class="headerlink" title="2.1 收集器(Collectors)"></a>2.1 收集器(Collectors)</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 获取所有的name转换到List&lt;String>中</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span>people<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取所有的name转换到Set&lt;String>中</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> set <span class="token operator">=</span>people<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">TreeSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 元素转换为String 并且将他们通过", " 连接起来</span>
<span class="token class-name">String</span> joined <span class="token operator">=</span> things<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token operator">::</span><span class="token function">toString</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//计算员工薪水之和</span>
<span class="token keyword">int</span> total <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token operator">::</span><span class="token function">getSalary</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 按照部门对员工进行分组</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span><span class="token punctuation">></span></span> byDept
    <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token operator">::</span><span class="token function">getDepartment</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 计算部门薪资和</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> totalByDept
    <span class="token operator">=</span> employees<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token operator">::</span><span class="token function">getDepartment</span><span class="token punctuation">,</span>
                                   <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token operator">::</span><span class="token function">getSalary</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 按照成绩是否通过把学生分为两组</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span><span class="token punctuation">></span></span> passingFailing <span class="token operator">=</span>
    students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">partitioningBy</span><span class="token punctuation">(</span>s <span class="token operator">-></span> s<span class="token punctuation">.</span><span class="token function">getGrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> PASS_THRESHOLD<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
























    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2022 Hexo
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @John Doe
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'korilin',
        admin: ['korilin'],
        language: 'en',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>