
<!DOCTYPE html>
<html lang="en ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexo || SQL基础</title>
    <meta name="author" content="John Doe">
    <meta name="description" content=" ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/avatar.png">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/maiden-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 5.4.2"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Hexo</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>about</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/like/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/like/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
        <a target="_blank" rel="noopener" href="https://en.korilin.com">
            <span>
                <a-icon type="compass" theme="filled" />
            </span>
            <span>英文博客</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Hexo</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/like/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/like/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
            <a target="_blank" rel="noopener" href="https://en.korilin.com">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="compass" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">英文博客</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>SQL基础 </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2019/12/5
        </span>

        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/DBA" style=color:#ffa2c4>
                    DBA
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <h1 id="零、简介"><a href="#零、简介" class="headerlink" title="零、简介"></a>零、简介</h1><p>重点内容已经标记，本笔记侧重操作，理论较少，仅进行简单的理论介绍，以达到了解的目的，本笔记旨在SQL的设计和操规范化进行讲解，《总结》和《设计》部分依据了Java后端开发工程师行业规约整理和总结而成，详细内容可查看《阿里巴巴Java开发手册》(华山版/泰山版/嵩山版)</p>
<p><em>By SkyFroop</em></p>
<center><font size= 6px color = #4e7ca1>有道无术，术尚可求；有术无道，止于术</font></center>































<h1 id="一、数据库分类"><a href="#一、数据库分类" class="headerlink" title="一、数据库分类"></a>一、数据库分类</h1><h2 id="1-1-关系型数据库-SQL"><a href="#1-1-关系型数据库-SQL" class="headerlink" title="1.1 关系型数据库(SQL)"></a>1.1 关系型数据库(SQL)</h2><ul>
<li>MySQL、Oracle、Sql Server、DB2、SQLlite</li>
<li>通过表和表之间，行和列之间的关系进行数据的存储。</li>
</ul>
<h2 id="1-2-非关系型数据库-NoSQL-Not-Only-SQL"><a href="#1-2-非关系型数据库-NoSQL-Not-Only-SQL" class="headerlink" title="1.2 非关系型数据库(NoSQL:Not Only SQL)"></a>1.2 非关系型数据库(NoSQL:Not Only SQL)</h2><ul>
<li>Redis、MongDB</li>
<li>非关系型数据库，对象存储，通过对象的自身的属性来决定</li>
</ul>
<h2 id="1-3-DBMS-数据库管理系统"><a href="#1-3-DBMS-数据库管理系统" class="headerlink" title="1.3 DBMS(数据库管理系统)"></a>1.3 DBMS(数据库管理系统)</h2><ul>
<li>数据库的管理软件，科学有效的管理我们的数据。</li>
<li>维护获取数据</li>
<li>MySQL本身就是一种数据库管理系统，可以管理和操作数据(DB)</li>
</ul>
<h2 id="1-4-数据库语言分类"><a href="#1-4-数据库语言分类" class="headerlink" title="1.4 数据库语言分类"></a>1.4 数据库语言分类</h2><ul>
<li>DDL   数据库定义语言</li>
<li>DML  数据库操作语言</li>
<li>DQL   数据库查询语言</li>
<li>DCL   数据库控制语言</li>
</ul>
<h1 id="二、DDL-DCL基本语句"><a href="#二、DDL-DCL基本语句" class="headerlink" title="二、DDL+DCL基本语句"></a>二、DDL+DCL基本语句</h1><p><strong>不区分大小写！</strong>如果某个字段名与关键字冲突，可以加两个 撇: ``</p>
<h2 id="2-1-数据库的列类型"><a href="#2-1-数据库的列类型" class="headerlink" title="2.1 数据库的列类型"></a>2.1 数据库的列类型</h2><blockquote>
<p>数值</p>
</blockquote>
<ul>
<li><p>整数:</p>
<ul>
<li>tinyint 十分小的数据     1个字节</li>
<li>smallint 较小的数据      2个字节</li>
<li><strong>int    标准的证书            4个字节【常用】</strong></li>
<li>bigint 较大的数据         8个字节</li>
</ul>
</li>
<li><p>浮点数:</p>
<ul>
<li>float  单精度浮点数      4个字节</li>
<li>double 双精度浮点数   8个字节</li>
<li>decimal  字符串形式的浮点数(精度问题！) 常用于金融计算</li>
</ul>
</li>
</ul>
<p><strong>注意</strong>：这里面的定义时后面的括号是显示字宽，不影响实际存储大小</p>
<blockquote>
<p>字符串</p>
</blockquote>
<ul>
<li>char  字符串固定大小 0–255</li>
<li><strong>varchar  可变字符串   0–65535 【最常用】</strong></li>
<li>tinytext  微型文本   2^8-1</li>
<li>text  文本串           2^16 - 1 保存大文本</li>
</ul>
<p>这里varchar()后面的数字可以代表长度</p>
<blockquote>
<p>时间日期</p>
</blockquote>
<ul>
<li>date     YYYY-MM-DD    日期格式</li>
<li>time     HH:MM:SS        时间格式</li>
<li><strong>datetime    YYYY-MM-DD  HH:MM:SS  【最常用】</strong></li>
<li>timestamp  时间戳   1970.1.1到现在的毫秒数【较常用】</li>
<li>year    年份</li>
</ul>
<blockquote>
<p>null</p>
</blockquote>
<ul>
<li>没有值</li>
<li>注意：不能使用NULL进行运算</li>
</ul>
<h2 id="2-2-数据库的字段属性-重点！"><a href="#2-2-数据库的字段属性-重点！" class="headerlink" title="2.2 数据库的字段属性(重点！)"></a>2.2 数据库的字段属性(重点！)</h2><ul>
<li>Unsigned : <ul>
<li>无符号的整数</li>
<li>声明了该列不能声明为负数</li>
</ul>
</li>
<li>zerofill：<ul>
<li>0填充的</li>
<li>不足的位数使用0来填充</li>
<li>如int(3) –&gt;  5 - 005</li>
</ul>
</li>
<li>自增：<ul>
<li>通常理解为自增，自动在上一条的基础上+1(默认+1)</li>
<li>通常用来设计唯一的主键，并且必须是整数类型</li>
<li>可以自定义设计主键自增的步长</li>
</ul>
</li>
<li>非空：<ul>
<li>如果设置为Not NULL，如果不给赋值，就会报错</li>
<li>如果设置为NULL，如果不赋值，默认为NULL</li>
</ul>
</li>
<li>默认：<ul>
<li>设置默认的值</li>
</ul>
</li>
</ul>
<p>alibaba规范，每一个表都必须包含以下五个字段：</p>
<p>id  主键</p>
<p>version  乐观锁</p>
<p>is_delete  伪删除</p>
<p>gmt_create  创建时间</p>
<p>gmt_update  修改数据</p>
<h2 id="2-3-MySQL基本语句"><a href="#2-3-MySQL基本语句" class="headerlink" title="2.3 MySQL基本语句"></a>2.3 MySQL基本语句</h2><ul>
<li><p>登录：mysql -u 用户名 -p 密码</p>
</li>
<li><p>查看所有的数据库：show databases;</p>
</li>
<li><p>切换数据库：use 数据库名;</p>
</li>
<li><p>查看所有的表：show tables;</p>
</li>
<li><p>显示数据库中所有的表的信息：describe student;</p>
</li>
<li><p>单行注释:  –  多行注释：/**/</p>
</li>
</ul>
<p>偷懒使用(可以用可视化工具创建后用此语句获取语句)：</p>
<ul>
<li>查看创建数据库的语句 : Show Create Database 数据库名;</li>
<li>查看数据表的定义语句: Show Create Table 表名;</li>
<li>DESC 表名：显示表的结构</li>
</ul>
<h2 id="2-4-数据库操作基本语句"><a href="#2-4-数据库操作基本语句" class="headerlink" title="2.4 数据库操作基本语句"></a>2.4 数据库操作基本语句</h2><h3 id="2-4-1-创建数据库"><a href="#2-4-1-创建数据库" class="headerlink" title="2.4.1 创建数据库"></a>2.4.1 创建数据库</h3><p>普通创建</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>防止数据库存在时创建</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> 数据库名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="2-4-2-删除数据库"><a href="#2-4-2-删除数据库" class="headerlink" title="2.4.2 删除数据库"></a>2.4.2 删除数据库</h3><p>普通删除</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Drop</span> <span class="token keyword">Database</span> 数据库名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>防止不存在删除</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Drop</span> <span class="token keyword">Database</span> <span class="token keyword">If</span> <span class="token keyword">Exists</span> 数据库名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="2-4-3-创建表"><a href="#2-4-3-创建表" class="headerlink" title="2.4.3 创建表"></a>2.4.3 创建表</h3><p>所有语句后面加逗号，最后一句不需要</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">Table</span> <span class="token keyword">if</span> <span class="token operator">not</span> exits 表名<span class="token punctuation">(</span>
	字段名<span class="token number">1</span> 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span> <span class="token punctuation">,</span>
    字段名<span class="token number">2</span> 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span> <span class="token punctuation">,</span> 
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">,</span>
    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> AUTO_OMCREMENT <span class="token keyword">COMMENT</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'匿名'</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">[</span>表类型<span class="token punctuation">]</span> <span class="token punctuation">[</span>字符集设置<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>表中的关键字解释</strong>：</p>
<ol>
<li>DEFAULT：默认值</li>
<li>NOT NULL：非空</li>
<li>PRIMARY KEY(字段名) :设置该列为主键</li>
<li>[表类型] [字符集设置] [注释]:<strong>常用</strong>的引擎和字符集 ENGINE=INNODB DEFAULT CHARSET=utf8</li>
<li>COMMENT：字段名的注释</li>
<li>AUTO_OMCREMENT : 主键自增</li>
</ol>
<h3 id="2-4-4-修改表"><a href="#2-4-4-修改表" class="headerlink" title="2.4.4 修改表"></a>2.4.4 修改表</h3><p>修改表名：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 <span class="token keyword">Rename</span> <span class="token keyword">As</span> 新表名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>增加字段：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 <span class="token keyword">ADD</span> 字段名 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>修改表的字段：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--修改约束：</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 <span class="token keyword">MODIFY</span> 字段名 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--重命名：</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 Change 字段名 新字段名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>删除表的字段：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 <span class="token keyword">Drop</span> 字段名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="2-4-5-删除表"><a href="#2-4-5-删除表" class="headerlink" title="2.4.5 删除表"></a>2.4.5 删除表</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Drop</span> <span class="token keyword">Table</span> <span class="token keyword">If</span> <span class="token keyword">Exists</span> 表名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="2-5-数据库引擎"><a href="#2-5-数据库引擎" class="headerlink" title="2.5 数据库引擎"></a>2.5 数据库引擎</h2><ol>
<li><p>INNODB：默认使用：</p>
</li>
<li><p>MyISAM：早期版本使用的</p>
</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>表空间的大小</td>
<td>较小</td>
<td>较大</td>
</tr>
</tbody></table>
<p><strong>常规的使用操作：</strong></p>
<ul>
<li>MYISAM 好处：节约空间，速度较快</li>
<li>INNODB 好处：安全性高，事务的处理，多表多用户操作</li>
</ul>
<p><strong>在物理空间存在的位置：</strong></p>
<p>所有的数据库文件都存在data目录下，一个文件夹就对应一个数据库，本质还是文件存储</p>
<p><strong>MySQL引擎在物理文件上的区别：</strong></p>
<ul>
<li>INNOD在数据库表中，只有一个*.frm文件 以及上级目录下的ibdata1文件</li>
<li>MYISAM对应的文件<ul>
<li>*.frm      表结构的定义文件</li>
<li>*.MYD    数据文件(data)</li>
<li>*.MYI     存放索引(index)</li>
</ul>
</li>
</ul>
<p><strong>设置数据库表的字符集编码：</strong></p>
<p>如果不设置，默认字符集不支持中文，那么会出现乱码问题，因此一般设置为utf8编码：CHARSET=utf8</p>
<p>或者在my.ini中配置默认的编码</p>
<h1 id="三、MySQL数据管理-DML-【含重点】"><a href="#三、MySQL数据管理-DML-【含重点】" class="headerlink" title="三、MySQL数据管理(DML)【含重点】"></a>三、MySQL数据管理(DML)【含重点】</h1><h2 id="3-1-外键【物理外键不建议使用】"><a href="#3-1-外键【物理外键不建议使用】" class="headerlink" title="3.1 外键【物理外键不建议使用】"></a>3.1 外键【物理外键不建议使用】</h2><p>删除有外键关系的表的时候，必须要先删除引用别人的表(从表)，再删除被引用的表(主表)</p>
<blockquote>
<p><strong>外键设置方法1：</strong></p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">Table</span> <span class="token keyword">if</span> <span class="token operator">not</span> exits 表名<span class="token punctuation">(</span>
	字段名<span class="token number">1</span> 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span> <span class="token punctuation">,</span>
    字段名<span class="token number">2</span> 列类型 <span class="token punctuation">[</span>属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span> <span class="token punctuation">,</span> 
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">KEY</span> FK_外键字段名 <span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> FK_外键字段名 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 另一个表<span class="token punctuation">(</span>另一个表的字段名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">[</span>表类型<span class="token punctuation">]</span> <span class="token punctuation">[</span>字符集设置<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>关键词解释：</p>
<ol>
<li>KEY FK_ 外键字段名中的 FK_ 是固定的</li>
<li>FOREIGN KEY：为本表的某字段设置为外键链接其他表</li>
<li>REFERENCES：引用，主要涉及外表内容</li>
<li>CONSTRAINT 约束</li>
</ol>
<blockquote>
<p><strong>外键设置方法2【建议】：</strong></p>
</blockquote>
<p>利用修改表</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Alter</span> <span class="token keyword">Table</span> 表名 
<span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> FK_外键字段名 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 另一个表<span class="token punctuation">(</span>另一个表的字段名<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>





<p><strong>以上操作都是数据库的物理外键，数据库级别的外键，不建议使用！(避免数据库过多造成困扰)</strong></p>
<p><strong>最佳实现：</strong></p>
<ul>
<li>数据库就是单纯的表，只用来存数据，只有行(数据)和列(字段)</li>
<li>如果想要使用多张表的数据，利用程序在应用层实现</li>
</ul>
<h2 id="3-2-DML语言基本语句【重点】！"><a href="#3-2-DML语言基本语句【重点】！" class="headerlink" title="3.2 DML语言基本语句【重点】！"></a>3.2 DML语言基本语句【重点】！</h2><h3 id="3-2-1-添加"><a href="#3-2-1-添加" class="headerlink" title="3.2.1 添加"></a>3.2.1 添加</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Insert</span> <span class="token keyword">Into</span> 表名 <span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">Values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>如果插表内所有字段可简化为:</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Insert</span> <span class="token keyword">Into</span> 表名 <span class="token keyword">Values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>​        此时字段与值一一对应，一个也不能少和对应错误</p>
<p>插入多个字段:</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Insert</span> <span class="token keyword">Into</span> 表名 <span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">Values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<h3 id="3-2-2-修改"><a href="#3-2-2-修改" class="headerlink" title="3.2.2 修改"></a>3.2.2 修改</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Update</span> 表名 <span class="token keyword">SET</span> 字段名<span class="token operator">=</span><span class="token keyword">value</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">Where</span> <span class="token punctuation">[</span>条件<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>如果不指定条件，会改动所有的表，最好不要这样</p>
<p><strong>value不一定是一个具体的值，也可以是变量名</strong></p>
<h3 id="3-2-3-删除"><a href="#3-2-3-删除" class="headerlink" title="3.2.3 删除"></a>3.2.3 删除</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Delete</span> <span class="token keyword">From</span> 表名 <span class="token keyword">Where</span> <span class="token punctuation">[</span>条件<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>危险操作：不写条件，就直接删库了</p>
<blockquote>
<p>TRUNCATE命令：</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">TRUNCATE</span> <span class="token keyword">Table</span> 表名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>作用：完全清空一个数据库表，效果与Delete不写条件类似，且不会改变表的结构和索引约束</p>
<blockquote>
<p>TRUNCATE和Delete From 表名比较</p>
</blockquote>
<ul>
<li>相同点：都能删除数据，都不会删除表结构</li>
<li>不同点：<ul>
<li>TRUNCATE 重新设置 自增列，计数器会归零</li>
<li>TRUNCATE 不会影响事务</li>
</ul>
</li>
</ul>
<p>拓展：DELETE删除的问题，重启数据库现象</p>
<ul>
<li>INNODB 自增列从1开始，(存在于内存中，断电即失)</li>
<li>MyISAM 继续从上一个子增量开始</li>
</ul>
<h3 id="3-2-4-查询"><a href="#3-2-4-查询" class="headerlink" title="3.2.4 查询"></a>3.2.4 查询</h3><p>见 四</p>
<h1 id="四、DQL查询数据【重中之重！】"><a href="#四、DQL查询数据【重中之重！】" class="headerlink" title="四、DQL查询数据【重中之重！】"></a>四、DQL查询数据【重中之重！】</h1><ul>
<li>所有查询操作都依靠DQL ：Select</li>
<li>简单的查询以及复杂的查询都能实现</li>
<li>数据库中最核心的语言，使用频率最高</li>
</ul>
<p>查询某表全部字段：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p><strong>SE LECT语法模板：</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span><span class="token operator">|</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> <span class="token comment">--是否需要去重</span>
&#123;<span class="token operator">*</span> <span class="token operator">|</span> <span class="token keyword">table</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token keyword">table</span><span class="token punctuation">.</span>field1<span class="token punctuation">[</span><span class="token keyword">as</span> alias1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>&#125;
<span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">as</span> table_alias<span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> table_name2<span class="token punctuation">]</span> <span class="token comment">--联合查询</span>
	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定结果需满足的条件</span>
	<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment">--指定结果按照那几个字段来分组</span>
	<span class="token punctuation">[</span><span class="token keyword">HAVING</span><span class="token punctuation">]</span>	<span class="token comment">--过滤分组的记录必须满足的次要条件</span>
	<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定查询记录按照一个或多个条件排序</span>
	<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> &#123;<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span>row_count <span class="token operator">|</span> row_countOFFSET <span class="token keyword">offset</span>&#125;<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">--指定查询的记录从哪条到哪条</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><em>Tips: []表示可选语句,{}表示必有语句</em></p>
<h2 id="4-1-Where-条件子语句"><a href="#4-1-Where-条件子语句" class="headerlink" title="4.1 Where 条件子语句"></a>4.1 Where 条件子语句</h2><p>作用:检索数据中<code>符合条件</code>的值</p>
<blockquote>
<p>逻辑运算符</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
<th>范围</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
<td>5=6</td>
<td>false</td>
</tr>
<tr>
<td>&lt;&gt;或!=</td>
<td>不等于</td>
<td>5&lt;&gt;6</td>
<td>true</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
<td></td>
<td></td>
</tr>
<tr>
<td>AND</td>
<td>和，&amp;&amp;</td>
<td>5&gt;1 and 1&gt;2</td>
<td>false</td>
</tr>
<tr>
<td>OR</td>
<td>或，||</td>
<td>5&gt;1 or 1&gt;2</td>
<td>true</td>
</tr>
<tr>
<td>Not</td>
<td>非</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>比较运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IS NULL</td>
<td>a IS NULL</td>
<td>如果操作符为NULL，则结果为真</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td>a IS NOT NULL</td>
<td>如果操作符为not NULL，则结果为真</td>
</tr>
<tr>
<td>Like</td>
<td>a like b</td>
<td>SQL匹配，如果a匹配b，则结果为真</td>
</tr>
<tr>
<td>BETWEEN … AND …</td>
<td>BETWEEN a AND b</td>
<td>在a和b之间,包括首尾</td>
</tr>
<tr>
<td>IN</td>
<td>a IN (a1,a2…)</td>
<td>假设a在指定集合里面，则结果为真</td>
</tr>
</tbody></table>
<h2 id="4-2-查询指定字段"><a href="#4-2-查询指定字段" class="headerlink" title="4.2 查询指定字段"></a>4.2 查询指定字段</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">Where</span> <span class="token punctuation">[</span>条件<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="别名应用-As-："><a href="#别名应用-As-：" class="headerlink" title="别名应用(As)："></a>别名应用(As)：</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> 列名 <span class="token keyword">As</span> 列别名 <span class="token keyword">From</span> 表名 <span class="token keyword">As</span> 表别名 <span class="token keyword">Where</span> <span class="token punctuation">[</span>条件<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="常用函数："><a href="#常用函数：" class="headerlink" title="常用函数："></a>常用函数：</h3><ul>
<li>字符串</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'值1'</span><span class="token punctuation">,</span><span class="token string">'值2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 连接字符串</span>
<span class="token keyword">SELECT</span> CHAR_LENGTH<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 字符串长度</span>
<span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 转小写</span>
<span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 转大写</span>
<span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'字符串'</span><span class="token punctuation">,</span><span class="token string">'子串'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 返回第一次出现的子串的索引</span>
<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">'字符串'</span><span class="token punctuation">,</span><span class="token string">'指定串'</span><span class="token punctuation">,</span><span class="token string">'新串'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 替换出现的指定字符串</span>
<span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">'字符串'</span><span class="token punctuation">,</span>开始位置<span class="token punctuation">,</span>结束位置<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 返回指定的子字符串</span>
<span class="token keyword">SELECT</span> REVERSE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 字符串反转</span>
LOCATE<span class="token punctuation">(</span>substr<span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 字符串str第一次出现字串substr的位置，可以利用LOCATE() = 0判断是否存在子串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>数学运算</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> ABS<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 绝对值</span>
<span class="token keyword">SELECT</span> CEILING<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 向上取整</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 向下取整</span>
<span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 随机数</span>
<span class="token keyword">SELECT</span> SIGN<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 判断一个数的符号，负数返回-1，正数返回1，0就是0</span>
<span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span>D<span class="token punctuation">)</span> <span class="token comment">/* MySQL自带的一个系统函数，X是数值，D是保留小数的位数。其作用就是按照小数位数，进行数值截取（此处的截取是按保留位数直接进行截取，没有四舍五入）规则如下：
1）当 D 大于0，是对数值 X 的小数位数进行操作；
2）当 D 等于0，是将数值 X 的小数部分去除，只保留整数部分；
3）当 D 小于0，是将数值 X 的小数部分去除，并将整数部分按照 D 指定位数，用 0 替换*/</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<ul>
<li>时间和日期</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_DATE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取当前时间</span>
<span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取当前时间</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取当前时间</span>
<span class="token keyword">SELECT</span> DATEDIFF<span class="token punctuation">(</span>开始时间，结束时间<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 两段时间相差多少天</span>
<span class="token keyword">SELECT</span> LOCALTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取本地时间</span>
<span class="token keyword">SELECT</span> SYSDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取系统时间</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DAY</span><span class="token punctuation">(</span>LAST_DAY<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 获取本月的天数</span>
DATE_FORMAT<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 函数用于以不同的格式显示日期/时间数据 格式缩写表：https://www.w3school.com.cn/sql/func_date_format.asp</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<ul>
<li>系统</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">SYSTEM_USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>





<h3 id="聚合函数【常用】"><a href="#聚合函数【常用】" class="headerlink" title="聚合函数【常用】"></a>聚合函数【常用】</h3><table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>COUNT()</strong></td>
<td>计数</td>
</tr>
<tr>
<td>SUM()</td>
<td>求和</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>指定字段<span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span> <span class="token comment">-- 会忽略所有的NULL值</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span> <span class="token comment">-- 不会忽略NULL值</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span> <span class="token comment">-- 不会忽略NULL值</span>
<span class="token comment">-- 列名为主键时，指定列名更快，非主键时count(1)更快</span>
<span class="token comment">-- COUNT(1)与COUNT(*)本质相同</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="去重操作"><a href="#去重操作" class="headerlink" title="去重操作"></a>去重操作</h3><p>关键词：distinct</p>
<p>发现重复数据可以去重</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="数据库的列-表达式"><a href="#数据库的列-表达式" class="headerlink" title="数据库的列(表达式)"></a>数据库的列(表达式)</h3><p>部分：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">--查询系统版本</span>
<span class="token keyword">Select</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">As</span> 计算结果 <span class="token comment">-- 用于计算</span>
<span class="token keyword">Select</span> @<span class="token variable">@auto_increment_increment</span> <span class="token comment">--查询自增的步长</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>数据库中的表达式：文本值，列，Null，函数，计算表达式，系统变量</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> 表达式 <span class="token keyword">From</span> 表<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<h2 id="4-3-模糊查询（LIKE）"><a href="#4-3-模糊查询（LIKE）" class="headerlink" title="4.3 模糊查询（LIKE）"></a>4.3 模糊查询（LIKE）</h2><p>本质是比较运算符</p>
<p>Like %代表0到任意个字符 _代表一个字符</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询多个字的</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名 <span class="token keyword">Where</span> 字段名 <span class="token operator">Like</span> <span class="token string">'%(某字符)%'</span>
<span class="token comment">-- 查询单个字符</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名 <span class="token keyword">Where</span> 字段名 <span class="token operator">Like</span> <span class="token string">'某字符_'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>在多条数据中查有无，用IN</p>
<h2 id="4-4-联表查询（JOIN）"><a href="#4-4-联表查询（JOIN）" class="headerlink" title="4.4 联表查询（JOIN）"></a>4.4 联表查询（JOIN）</h2><h2 id="join" style="display:none;"> </h2>

<blockquote>
<p>Join对比</p>
</blockquote>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210427222824681.png" alt="image-20210427222824681"></p>
<p>七大联表查询：</p>
<p><img src="https://img-blog.csdn.net/20171230161932523" alt="img"></p>
<table>
<thead>
<tr>
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>left join</td>
<td>如果表中至少有一个匹配，就返回行(交叉条件)</td>
</tr>
<tr>
<td>inner join</td>
<td>会从左表中返回所有的值，即使右表没有匹配</td>
</tr>
<tr>
<td>right join</td>
<td>会从右表中返回所有的值，即使左表没有匹配</td>
</tr>
</tbody></table>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol>
<li>分析需求：，分析查询的字段来自哪些表(连接查询)</li>
<li>确定使用那种连接查询(共七种)</li>
<li>确定交叉点(这两个表中哪个数据时相同的)</li>
<li>如果存在多张表，先查询两张表再慢慢增加</li>
</ol>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p><strong>两张表：</strong></p>
<p>表student:</p>
<p>​    含字段：studentNO,studentName</p>
<p>表result:</p>
<p>​    含字段：studentNO,StudentResult</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> studentNO<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>SubjectNo<span class="token punctuation">,</span>StudentResult
<span class="token keyword">From</span> student <span class="token keyword">As</span> s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> result <span class="token keyword">As</span> r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNO <span class="token operator">=</span> r<span class="token punctuation">.</span>studetNO<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意:</strong> 这里连接语法要用ON(连接查询中判断的条件)，Where是等值查询。两者作用一样，但这里受语法限制</p>
<p><strong>多张表：</strong></p>
<p>表student:</p>
<p>​    含字段：studentNO,studentName</p>
<p>表result:</p>
<p>​    含字段：StudentResult，studentNO,SubjectNo</p>
<p>表subject:</p>
<p>​    含字段：SubjectNo,SubjectName,studentNO</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> studentNO<span class="token punctuation">,</span>studentName<span class="token punctuation">,</span>SubjectNo<span class="token punctuation">,</span>StudentResult
<span class="token keyword">From</span> student  s	<span class="token comment">--这里也是别名的一种方式</span>
<span class="token keyword">Right</span> <span class="token keyword">JOIN</span> result  r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>studentNO <span class="token operator">=</span> r<span class="token punctuation">.</span>studetNO
<span class="token keyword">Inner</span> <span class="token keyword">Join</span> subject sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> sub<span class="token punctuation">.</span>SubjectNo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="4-5-自连接查询【了解】"><a href="#4-5-自连接查询【了解】" class="headerlink" title="4.5 自连接查询【了解】"></a>4.5 自连接查询【了解】</h2><p>自己的表和自己的表连接</p>
<p>核心：一张表拆为两张一样的表</p>
<p>查询父子信息：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> 当前字段名 <span class="token keyword">as</span> 父别名<span class="token punctuation">,</span>当前字段名 <span class="token keyword">As</span> 子别名
<span class="token keyword">From</span> 当前表名 <span class="token keyword">As</span> 父表别名<span class="token punctuation">,</span>当前表名 <span class="token keyword">As</span> 子表别名
<span class="token keyword">Where</span> 父表别名<span class="token punctuation">.</span>id <span class="token operator">=</span> 子表别名<span class="token punctuation">.</span>pid<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h2 id="4-6-分页-Limit-和排序-Order-By"><a href="#4-6-分页-Limit-和排序-Order-By" class="headerlink" title="4.6 分页(Limit)和排序(Order By)"></a>4.6 分页(Limit)和排序(Order By)</h2><h3 id="4-6-1-排序"><a href="#4-6-1-排序" class="headerlink" title="4.6.1 排序"></a>4.6.1 排序</h3><ul>
<li><p>升序：ASC</p>
</li>
<li><p>降序：DESC</p>
</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名
<span class="token keyword">Order</span> <span class="token keyword">By</span> 字段名 &#123;<span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3 id="4-6-2-分页"><a href="#4-6-2-分页" class="headerlink" title="4.6.2 分页"></a>4.6.2 分页</h3><p>作用：缓解数据库压力，给人更好的体验</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名
<span class="token keyword">Limit</span> 起始值<span class="token punctuation">,</span>页面大小<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>举例:</p>
<p>Limit 0,5  : 1~5条</p>
<p>Limit 1,5 ：2~6条</p>
<p>Limit 5,5 : 第二页</p>
<h3 id="4-6-3-应用举例"><a href="#4-6-3-应用举例" class="headerlink" title="4.6.3 应用举例"></a>4.6.3 应用举例</h3><p><strong>题目</strong>：查询 Java 第一学年，课程乘绩排名前十的学生，并且分数大于80的学生信息(学号，姓名，课程名称，分数)</p>
<p>数据库结构：</p>
<p>​    表student:</p>
<p>​        含字段：StudentNo,StudentName</p>
<p>​    表result:</p>
<p>​        含字段：StudentResult，StudentNo,SubjectNo</p>
<p>​    表subject:</p>
<p>​        含字段：SubjectNo,StudentNo,SubjectName</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> s<span class="token punctuation">.</span>StudentNo<span class="token punctuation">,</span>StudentName<span class="token punctuation">,</span>SubjectName<span class="token punctuation">,</span>StudentResult
<span class="token keyword">From</span> sutdent s
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> result r
<span class="token keyword">ON</span> s<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>StudentNo
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> subject sub
<span class="token keyword">ON</span> sub<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> r<span class="token punctuation">.</span>SubjuctNo
<span class="token keyword">WHERE</span> SubjectName <span class="token operator">=</span> <span class="token string">'第一学年'</span> <span class="token operator">AND</span> StudentResult<span class="token operator">>=</span><span class="token number">80</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> StudentResult <span class="token keyword">DESC</span> <span class="token comment">--降序</span>
<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="4-7-子查询-【难点-重点】"><a href="#4-7-子查询-【难点-重点】" class="headerlink" title="4.7 子查询 【难点|重点】"></a>4.7 子查询 【难点|重点】</h2><p>本质：在Where语句中嵌套一个子查询语句</p>
<p>此处截取SQL语句与需求，不提供数据库</p>
<p>子查询包括：Where嵌套查询 和 联表查询</p>
<p>  <a href="#join">联表查询见4.4</a></p>
<p>这里是嵌套查询：</p>
<ol>
<li>用子查询找出所有没有成绩的学生的学号、姓名及院系，专业。</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token keyword">Distinct</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>Student<span class="token punctuation">.</span>Sname<span class="token punctuation">,</span>Student<span class="token punctuation">.</span>Sdept<span class="token punctuation">,</span>Smajor 
<span class="token keyword">From</span> Student <span class="token punctuation">,</span>SC 
<span class="token keyword">Where</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span>
    <span class="token keyword">Select</span> Student<span class="token punctuation">.</span>Sno 
    <span class="token keyword">From</span> Student<span class="token punctuation">,</span>SC 
    <span class="token keyword">Where</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<ol start="2">
<li>查询课程名中不含“大学”字样的课程信息。</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> Course 
<span class="token keyword">Where</span> Cname <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span>
    <span class="token keyword">Select</span> Cname 
    <span class="token keyword">From</span> Course 
    <span class="token keyword">Where</span> Cname <span class="token operator">Like</span> <span class="token string">'大学%'</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>查询平均分高于80分的学生</li>
</ol>
<p>表结构:</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>stu<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>sname<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>mno<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>birdate<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>memo<span class="token punctuation">`</span></span> <span class="token keyword">text</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>sc<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>grade<span class="token punctuation">`</span></span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>fk_sc_sno<span class="token punctuation">`</span></span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>stu<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>sno<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>答案：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token keyword">DisTinct</span> sname 
<span class="token keyword">From</span> stu<span class="token punctuation">,</span>sc 
<span class="token keyword">Where</span> sc<span class="token punctuation">.</span>sno <span class="token operator">=</span> stu<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>sno <span class="token operator">in</span> <span class="token punctuation">(</span>
    <span class="token keyword">Select</span> sno <span class="token keyword">From</span> sc 
    <span class="token keyword">Group</span> <span class="token keyword">By</span> sno 
    <span class="token keyword">Having</span> <span class="token function">AVG</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">80</span>
<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="4-8-分组过滤"><a href="#4-8-分组过滤" class="headerlink" title="4.8 分组过滤"></a>4.8 分组过滤</h2><p>举例：</p>
<p>查询不同课程的平均分，最高分，最低分，平均分大于80 (核心：根据不同的课程分析)</p>
<p>​    表result:</p>
<p>​        含字段：StudentResult，StudentNo,SubjectNo</p>
<p>​    表subject:</p>
<p>​        含字段：SubjectNo,StudentNo,SubjectName</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> subjectName<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>StudentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 平均分<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>StudentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最高分<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>StudentResult<span class="token punctuation">)</span> <span class="token keyword">AS</span> 最低分
<span class="token keyword">From</span> result r
<span class="token keyword">INNER</span> <span class="token keyword">Join</span> subject sub
<span class="token keyword">ON</span> r<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> sub<span class="token punctuation">.</span>SubjectNo
<span class="token keyword">Group</span> <span class="token keyword">By</span> r<span class="token punctuation">.</span>SubjectNo <span class="token comment">--通过什么字段分组</span>
<span class="token keyword">Having</span> 平均分 <span class="token operator">></span> <span class="token number">80</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>注意，分组过滤不能使用Where，要用Having</p>
<h2 id="4-9-数据库级别的MD5加密【拓展】"><a href="#4-9-数据库级别的MD5加密【拓展】" class="headerlink" title="4.9  数据库级别的MD5加密【拓展】"></a>4.9  数据库级别的MD5加密【拓展】</h2><p>什么是MD5?<br>主要增强算法复杂度和不可逆性。MD5不可逆</p>
<p>加密：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">UPDATE</span> 表名 <span class="token keyword">SET</span> 加密字段<span class="token operator">=</span>MD5<span class="token punctuation">(</span>加密字段<span class="token punctuation">)</span> <span class="token keyword">Where</span> <span class="token punctuation">[</span>条件<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="4-10-合并表-UNION-、虚拟表、特殊关键字用法"><a href="#4-10-合并表-UNION-、虚拟表、特殊关键字用法" class="headerlink" title="4.10 合并表(UNION)、虚拟表、特殊关键字用法"></a>4.10 合并表(UNION)、虚拟表、特殊关键字用法</h2><h3 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h3><p>UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</p>
<p>UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同。</p>
<p>UNION语法：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name1
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。</p>
<p>SQL UNION ALL 语法：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name1
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">FROM</span> table_name2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h3 id="dual表的用途及案例-dual虚拟表"><a href="#dual表的用途及案例-dual虚拟表" class="headerlink" title="dual表的用途及案例 (dual虚拟表)"></a>dual表的用途及案例 (dual虚拟表)</h3><blockquote>
<p>DUAL是为了方便那些要求所有SELECT语句都应该具有FROM和其他子句的人。MySQL可能会忽略该条款。如果没有引用表，MySQL不需要从DUAL。</p>
</blockquote>
<h3 id="较少使用的关键字及其用法"><a href="#较少使用的关键字及其用法" class="headerlink" title="较少使用的关键字及其用法"></a>较少使用的关键字及其用法</h3><p>CUBE：CUBE 生成的结果集显示了所选列中值的所有组合的聚合。</p>
<p>ROLLUP：ROLLUP 生成的结果集显示了所选列中值的某一层次结构的聚合。</p>
<p>GROUPING：当行由 CUBE 或 ROLLUP 运算符添加时，该函数将导致附加列的输出值为 1；当行不由 CUBE 或 ROLLUP 运算符添加时，该函数将导致附加列的输出值为 0。</p>
<h1 id="五、事务"><a href="#五、事务" class="headerlink" title="五、事务"></a>五、事务</h1><p>什么是事务：</p>
<p> 要么都成功要么都失败</p>
<ol>
<li>SQL1 执行 A给B转账   A 1000  —-&gt; 200  B 200</li>
<li>SQL 2执行 B收到钱  A 800 —–&gt; B 400</li>
</ol>
<p>将SQL放在一个批次中去执行</p>
<h2 id="5-1-事务原则"><a href="#5-1-事务原则" class="headerlink" title="5.1 事务原则"></a>5.1 事务原则</h2><h3 id="ACID原则："><a href="#ACID原则：" class="headerlink" title="ACID原则："></a><strong>ACID原则：</strong></h3><ul>
<li>**原子性(Atomicity)**：针对同一个事务，即SQL1和SQL2要么一起成功要么一起失败</li>
<li>**一致性(Consistency)**：针对一个事务操作前与操作后的状态一致</li>
<li>**持久性(Durability)**：表示事务结束后的数据不随外界原因导致数据丢失<ul>
<li>如果事务没有提交，服务器宕机或断电，那么重启数据库后数据状态恢复为原来的状态</li>
<li>如果事务已经提交，服务器宕机或断电，重启后应该是状态已经改变后的状态</li>
</ul>
</li>
<li>**隔离性(Isolation)**：针对多个用户同时操作，主要是排除其他事务对本次事务的影响</li>
</ul>
<h3 id="隔离导致的一部分问题："><a href="#隔离导致的一部分问题：" class="headerlink" title="隔离导致的一部分问题："></a><strong>隔离导致的一部分问题：</strong></h3><ul>
<li>脏读：一个事务读取了另一个事务<strong>未提交</strong>的数据</li>
<li>不可重复读：在一个事务内读取表中的某一行数据，多次读取结果不同。(这个不一定是错误，只是某些场合不对)</li>
<li>虚读(幻读)：是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。一般是导致多了一行</li>
</ul>
<h2 id="事务的SQL实现"><a href="#事务的SQL实现" class="headerlink" title="事务的SQL实现"></a>事务的SQL实现</h2><p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210428223647431.png" alt="image-20210428223647431"></p>
<h2 id="5-2-隔离级别"><a href="#5-2-隔离级别" class="headerlink" title="5.2 隔离级别"></a>5.2 隔离级别</h2><p>脏读”、“不可重复读”和“幻读”，其实都是数据库读一致性问题，必须由数据库提供一定的事务隔离机制来解决。</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220107210227726.png" alt="image-20220107210227726"></p>
<p>数据库的事务隔离越严格，并发副作用越小，但付出的代价也就越大，因为事务隔离实质上就是使事务在一定程度上“串行化”进行，这显然与“并发”是矛盾的。同时，不同的应用对读一致性和事务隔离程度的要求也是不同的，比如许多应用对“不可重复读”和“幻读”并不敏感，可能更关心数据并发访问的能力。</p>
<h1 id="六、索引"><a href="#六、索引" class="headerlink" title="六、索引"></a>六、索引</h1><blockquote>
<p>MySQL官方对索引的定义为:<strong>索引 (Index)）是帮助MySQL高效获取数据的数据结构。</strong></p>
<p>提取句子主干，就可以得到索引的本质:索引是数据结构。</p>
</blockquote>
<h2 id="6-1-索引的分类"><a href="#6-1-索引的分类" class="headerlink" title="6.1 索引的分类"></a>6.1 索引的分类</h2><ul>
<li>主键索引 : PRIMARY KEY<ul>
<li>唯一的标识，主键不可重复，只有一个列可以作为主键</li>
</ul>
</li>
<li>唯一索引 ：UNIQUE KEY<ul>
<li>避免重复的列出现，唯一索引可以重复，多个列都可以标识为 唯一索引</li>
</ul>
</li>
<li>常规索引 ：KEY / INDEX<ul>
<li>默认的，INDEX 或 KEY关键字来设置</li>
</ul>
</li>
<li>全文索引 ：FULLTEXT<ul>
<li>在特定的数据库引擎下才有 : MyISAM</li>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<h2 id="6-2-索引的使用"><a href="#6-2-索引的使用" class="headerlink" title="6.2 索引的使用"></a>6.2 索引的使用</h2><ol>
<li>在创建表的时候给字段增加索引</li>
<li>创建完毕后，增加索引</li>
</ol>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 显示当前所有的索引信息</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span>
<span class="token comment">-- 增加一个索引</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> 索引 <span class="token keyword">INDEX</span> 索引名<span class="token punctuation">(</span>列名<span class="token punctuation">)</span> <span class="token comment">-- 一般索引名与列名同名</span>

<span class="token comment">-- 分析SQL执行状况 :EXPLAIN</span>
<span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">From</span> 表名<span class="token punctuation">;</span> <span class="token comment">-- 非全文索引</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">WHERE</span> <span class="token keyword">MATCH</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> AGAINST<span class="token punctuation">(</span><span class="token string">'查找值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 全文索引</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="6-3-索引原则"><a href="#6-3-索引原则" class="headerlink" title="6.3 索引原则"></a>6.3 索引原则</h2><ul>
<li>索引不是越多越好</li>
<li>不要对进程变动数据加索引</li>
<li>小数据量的表不需要加索引</li>
<li>索引一般加在常用来查询的字段上</li>
</ul>
<blockquote>
<p>索引的数据结构</p>
</blockquote>
<p>Hash 类型的索引</p>
<p>Btree INNODB的默认数据结构</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210429223436340.png" alt="image-20210429223436340"></p>
<h1 id="七、数据库的设计"><a href="#七、数据库的设计" class="headerlink" title="七、数据库的设计"></a>七、数据库的设计</h1><p><strong>当数据库比较复杂的时候，我们就需要设计了</strong></p>
<p>糟糕的数据库设计:</p>
<ul>
<li><p>数据冗余，浪费空间</p>
</li>
<li><p>数据库插入和删除都会麻烦、异常【屏蔽使用物理外键】</p>
</li>
</ul>
<p>良好的数据库设计:</p>
<ul>
<li>节省内存空间</li>
<li>保证数据库的完整性</li>
<li>方便我们开发系统</li>
</ul>
<p><strong>软件开发中，关于数据库的设计：</strong></p>
<ul>
<li>分析需求：分析业务和需要处理的数据库的需求</li>
<li>概要设计：设计关系E-R图</li>
</ul>
<p>数据库设计步骤：</p>
<ul>
<li>收集信息，分析需求<ul>
<li>用户表：用户登录注销，用户的个人信息</li>
<li>分类表：分类</li>
<li>内容表：内容</li>
<li>友链表 ： 友链信息</li>
<li>自定义表：系统信息，某个关键的子或者一些主字段 key：value</li>
</ul>
</li>
<li>标识实体 把需求落地到每个字段</li>
<li>标识实体之间的关系</li>
</ul>
<h2 id="7-1-数据库三大范式"><a href="#7-1-数据库三大范式" class="headerlink" title="7.1 数据库三大范式"></a>7.1 数据库三大范式</h2><p>为什么需要规范？</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常<ul>
<li>无法正常显示信息</li>
</ul>
</li>
<li>删除异常<ul>
<li>丢失有效信息</li>
</ul>
</li>
</ul>
<blockquote>
<p> <strong>三大范式：</strong></p>
</blockquote>
<h3 id="第一范式-1NF"><a href="#第一范式-1NF" class="headerlink" title="第一范式(1NF):"></a><strong>第一范式(1NF):</strong></h3><p><strong>要求数据库表的每一列都是补课分割的原子数据项。</strong></p>
<p>举例：</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210430134041779.png" alt="image-20210430134041779"></p>
<p>家庭信息可以再分：人口数和地点</p>
<p>学校信息可以再分学位和年级</p>
<h3 id="第二范式-2NF-："><a href="#第二范式-2NF-：" class="headerlink" title="第二范式(2NF)："></a>第二范式(2NF)：</h3><p><strong>在第一范式的基础上，非码属性必须完全依赖于候选码</strong>(换言之：每张表只描述一件事) ，<strong>第二范式需要确保数据库中的每一列都和主键相关，而不能至于主键的某一部分相关</strong>(主要针对联合之间而言)</p>
<p>举例：</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210430134940210.png" alt="image-20210430134940210"></p>
<p>在上图所示的情况中，同一个订单中可能也含不同的产品，因此主键必须足”订单号”和“产品号”联合组成,<br>但可以发现，产品数量、产品折扣、产品价格与”订单号”和“产品号”都相关，但是订单金瓶和订单时间仅与”订单号”相关，与产品号无关。这样就不满足第二范式的要求，需分成两个表，应修改为:</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210430135104301.png" alt="image-20210430135104301"></p>
<h3 id="第三范式-3NF-："><a href="#第三范式-3NF-：" class="headerlink" title="第三范式(3NF)："></a>第三范式(3NF)：</h3><p><strong>在第二范式的基础上，任何非主属性不依赖于其他非主属性，第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关</strong></p>
<p>举例：</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210430141250208.png" alt="image-20210430141250208"></p>
<p>表所有属性都完全依赖于学号，所以满足第二范式，但是”班主任性别”和”班主任年龄”直接依赖的是”班主任姓名”，而不是主键”学号”，所以需做如下调整：</p>
<p><img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20210430141326205.png" alt="image-20210430141326205"></p>
<p>规范性  和  性能的问题：</p>
<p>关联查询的表不得超过三张表</p>
<ul>
<li>考虑商业化的需求和目标(成本、用户体验)</li>
<li>在规范性能的问题的时候，需要适当的考虑一下 规范性</li>
<li>故意给某些表增加一些冗余的字段(从多表查询变为单表查询)</li>
<li>故意增加一些计算列(从大数据量降低为小数据量的查询：或者增加索引)</li>
</ul>
<h1 id="八、数据库连接池"><a href="#八、数据库连接池" class="headerlink" title="八、数据库连接池"></a>八、数据库连接池</h1><p>数据库连接—执行完毕—释放</p>
<p>连接–释放  非常浪费系统资源</p>
<p><strong>池化技术：准备一些预先的资源，过来就连接预先准备好的</strong></p>
<p>最小连接数、最大连接数、等待超时</p>
<p>编写连接池，实现一个接口：DataSource</p>
<blockquote>
<p>开源数据源实现</p>
</blockquote>
<p>DBCP</p>
<p>C3P0</p>
<p>Druid</p>
<p>使用了这些数据库连接池之后，我们在项目中就不需要编写连接数据库的代码了</p>
<h1 id="九、总结"><a href="#九、总结" class="headerlink" title="九、总结"></a>九、总结</h1><p><strong>数据库的难点主要在于查询</strong></p>
<ul>
<li><p>常用查询</p>
<ul>
<li>涉及到多表操作时，使用联表查询(JOIN)，其中使用较多的就是INNER JOIN。同时不是必须使用，也可通过FROM多表查询</li>
<li>涉及到需要分组统计的时候，使用GROUP BY XX字段</li>
<li>根据多组字段排序时，ORDER BY 字段1 ASC/DESC , 字段2 ASC/DESC …</li>
</ul>
</li>
<li><p>查询的易错点</p>
<ul>
<li><p>HAVING和WHERE，他们两个的执行位置不同，WHERE要在GROUP BY之前，而HAVING要在其后，同时，聚合函数(如count(),AVG()等)是不能放进WHERE的，因为WHERE的执行顺序先于他们，因此会出现语法错误，而HAVING则可以根据聚合函数的值进行过滤筛选。</p>
</li>
<li><p>判断是否为NULL的时候，是用 IS NULL 判断，并非 = 号。</p>
</li>
<li><p>联表查询时也可能需要自联，两个相同的表进行连接，此时容易出现表明混乱，这时候所有的表明必须取一个别名，并且字段名需要使用表名的别名进行索引，其他类似情况同理。</p>
</li>
</ul>
</li>
</ul>
<p><strong>在设计表时，一般要遵循如下的默认规则</strong>：</p>
<ul>
<li>选择合适的数据类型。能定长尽量定长。定长会节省很多查询时间</li>
<li>使用ENUM而不是Varchar，ENUM类型是非常快和紧凑的，在实际上，其保存的是TINYINT，但外表显示为字符串，用这个字段做一些选项列表变得非常完美。</li>
<li>不要使用无法加索引的类型作为关键字段，比如test类型</li>
<li>为了避免联表查询，有时候可以适当的数据冗余，比如邮箱、姓名这些不容易更改的数据</li>
<li>选择合适的表引擎，有时候MyISAM适合，有时候InnoDB适合</li>
<li>为保证查询性能，最好每个表都建立有auto_increment字段，建立合适的数据库索引</li>
<li>最好给每个字段设定一个default值</li>
</ul>
<p>索引建立原则：合适的索引可以提高语句性能</p>
<ul>
<li><p>一般针对数据分散的关键字进行建立索引，比如ID、QQ、性别、状态值等建立索引没有意义</p>
</li>
<li><p>字段唯一，最少，不可为NULL</p>
</li>
<li><p>对大数据量建立聚集索引、避免更新操作带来的碎片</p>
</li>
<li><p>尽量使用段索引，一般对int、char、date等类型的字段建立索引</p>
</li>
<li><p>谨慎件里Unique类型的索引</p>
</li>
<li><p>大文本字段不建立为索引，如果需要对大文本字段进行检索，可以考虑全文索引</p>
</li>
<li><p>频繁更新的列不适合建立索引  </p>
</li>
<li><p>Order By中的字段、where子句中的字段。最常用的sql语句中的字段，应该建立索引</p>
</li>
<li><p>只有建立索引以后，表内的行才能按照特定的顺序存储，按照需要可以是ASC或DESC</p>
</li>
</ul>
<p><strong>SQL语句模板</strong>：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span><span class="token operator">|</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> <span class="token comment">--是否需要去重</span>
&#123;<span class="token operator">*</span> <span class="token operator">|</span> <span class="token keyword">table</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token keyword">table</span><span class="token punctuation">.</span>field1<span class="token punctuation">[</span><span class="token keyword">as</span> alias1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>&#125;
<span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">as</span> table_alias<span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> table_name2<span class="token punctuation">]</span> <span class="token comment">--联合查询</span>
	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定结果需满足的条件</span>
	<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment">--指定结果按照那几个字段来分组</span>
	<span class="token punctuation">[</span><span class="token keyword">HAVING</span><span class="token punctuation">]</span>	<span class="token comment">--过滤分组的记录必须满足的次要条件</span>
	<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定查询记录按照一个或多个条件排序</span>
	<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> &#123;<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span>row_count <span class="token operator">|</span> row_countOFFSET <span class="token keyword">offset</span>&#125;<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">--指定查询的记录从哪条到哪条</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>MySQL语句的执行顺序</strong>：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">DISTINCT</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>TOP_specification<span class="token operator">></span> <span class="token operator">&lt;</span>Select_list<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>table_name<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">as</span> table_alias<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>		<span class="token punctuation">[</span><span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> table_name2<span class="token punctuation">]</span> <span class="token comment">--联合查询</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>		<span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">WITH</span> &#123;CUBE <span class="token operator">|</span> ROLLUP&#125;<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">HAVING</span><span class="token punctuation">]</span> 
<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>使SQL语言更高效</strong>：</p>
<ul>
<li>能够快速缩小结果集的WHERE条件写在前面，如果有恒量条件，也尽量放在前面</li>
<li>尽量避免使用GROUP BY、DISTINCT、OR、IN等语句，尽量避免使用联表查询和子查询</li>
<li>不要在WHERE子句中的”=”左边进行算术或表达式运算，否则系统可能无法正确使用索引</li>
<li>避免使用SELECT * ，只取需要的字段</li>
<li>如果查入的数据量很大，用SELECT INTO 替代 INSERT INTO 能带来更好的性能</li>
<li>WHERE字句中尽量不要使用CASE条件</li>
<li>尽量不使用触发器，特别是大数据表上</li>
<li>使用　UNION　ALL　操作代替OR操作，注意此时需要注意一点查询条件可以使用聚集索引，如果是非聚集索引将因此相反的效果</li>
<li>当只有一行数据时使用　LIMIT　１</li>
</ul>
<p><strong>数据库和Java字段对应</strong>：</p>
<p><img src="https://img-blog.csdn.net/20170930200408361?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvenQxNTczMjYyNTg3OA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>Date在JavaEntity中一般使用java.util.Date类型</p>
<h1 id="十、SQL模板"><a href="#十、SQL模板" class="headerlink" title="十、SQL模板"></a>十、SQL模板</h1><p><strong>SQL语句模板</strong>：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span><span class="token operator">|</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> <span class="token comment">--是否需要去重</span>
&#123;<span class="token operator">*</span> <span class="token operator">|</span> <span class="token keyword">table</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token keyword">table</span><span class="token punctuation">.</span>field1<span class="token punctuation">[</span><span class="token keyword">as</span> alias1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>&#125;
<span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">as</span> table_alias<span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> table_name2<span class="token punctuation">]</span> <span class="token comment">--联合查询</span>
	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定结果需满足的条件</span>
	<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token comment">--指定结果按照那几个字段来分组</span>
	<span class="token punctuation">[</span><span class="token keyword">HAVING</span><span class="token punctuation">]</span>	<span class="token comment">--过滤分组的记录必须满足的次要条件</span>
	<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	<span class="token comment">--指定查询记录按照一个或多个条件排序</span>
	<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> &#123;<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span>row_count <span class="token operator">|</span> row_countOFFSET <span class="token keyword">offset</span>&#125;<span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">--指定查询的记录从哪条到哪条</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>MySQL语句的执行顺序</strong>：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">DISTINCT</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>TOP_specification<span class="token operator">></span> <span class="token operator">&lt;</span>Select_list<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>table_name<span class="token operator">></span> <span class="token punctuation">[</span><span class="token keyword">as</span> table_alias<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>		<span class="token punctuation">[</span><span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> table_name2<span class="token punctuation">]</span> <span class="token comment">--联合查询</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>		<span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">></span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>	
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">WITH</span> &#123;CUBE <span class="token operator">|</span> ROLLUP&#125;<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">HAVING</span><span class="token punctuation">]</span> 
<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2022 Hexo
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @John Doe
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'korilin',
        admin: ['korilin'],
        language: 'en',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>